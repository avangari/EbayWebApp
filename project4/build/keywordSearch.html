<html>
	<head><title>Keyword Search</title></head>
	<script type="text/javascript">
		var xmlHttp = new XMLHttpRequest();
		
		function sendAjaxRequest(input)
		{
			var request = "suggest?q="+encodeURI(input);
			
			xmlHttp.open("GET",request);
			xmlHttp.onreadystatechange = showSuggestion;
			xmlHttp.send(null);
			
		}
		
		function showSuggestion()
		{
			 if ( (xmlHttp.readyState == 4) && (xmlHttp.status === 200) )
				 {
				// get the CompleteSuggestion elements from the response
				    var s = xmlHttp.responseXML.getElementsByTagName('CompleteSuggestion');
				 	
				    // construct a bullet list from the suggestions
				    var htmlCode = "<datalist id=\"datalist1\">";
				    for (i = 0; i < s.length; i++) {
				       var text = s[i].childNodes[0].getAttribute("data");

				       htmlCode += "<option value=\"" + text + "\">";
				    }
				    htmlCode += "</datalist>";

				    // display the list on the page
				    document.getElementById("suggestion").innerHTML = htmlCode;
				 }
		}
	
	</script>
	
    <body>
    	<h1>Keyword Search</h1>
    	<form action="/eBay/search" method="GET">
    		Keyword Search: <input type="text" name="q" id="q" onkeyup = "sendAjaxRequest(this.value);" list="datalist1"/> 
    		<pre id="suggestion"></pre>
    		<br />
    		<input type="hidden" name="numResultsToSkip" value="0"/>
			<input type="hidden" name="numResultsToReturn" value="20"/><br/>
    		<input type="submit"/>
    	</form>
    </body>
</html>
